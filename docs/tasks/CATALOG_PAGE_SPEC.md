# –¢–ó: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ö–∞—Ç–∞–ª–æ–≥–∞ ‚Äî –í–∏—Ç—Ä–∏–Ω–∞ –¥–ª—è –ü–æ–∫—É–ø–∞—Ç–µ–ª—è

## –°—Ç–∞—Ç—É—Å: –§–∞–∑–∞ 4 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (Sidebar Filters)
## –ü—Ä–æ—Ç–æ—Ç–∏–ø: `prototype/catalog_page.html` ‚úÖ
## Production: http://158.160.229.16/flower/

---

## 1. –ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1.1 –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –≤–∏—Ç—Ä–∏–Ω—É –¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (—Ñ–ª–æ—Ä–∏—Å—Ç–∞), –≥–¥–µ –æ–Ω –º–æ–∂–µ—Ç:
- –ë—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ü–≤–µ—Ç—ã –ø–æ —Ç–∏–ø—É, —Å—Ç—Ä–∞–Ω–µ, —Ü–≤–µ—Ç—É, —Ä–∞–∑–º–µ—Ä—É, —Ü–µ–Ω–µ
- –í–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –∞—Ç—Ä–∏–±—É—Ç—ã, —Ü–µ–Ω–∞
- –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- –ü–æ–Ω–∏–º–∞—Ç—å —Ü–µ–Ω–æ–≤—ã–µ —Ç–∏—Ä—ã (–æ–ø—Ç–æ–≤—ã–µ —Å–∫–∏–¥–∫–∏)
- –î–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É

### 1.2 –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **–ü–æ–∫—É–ø–∞—Ç–µ–ª—å (Buyer)** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Ñ–ª–æ—Ä–∏—Å—Ç—ã, –∑–∞–∫—É–ø–∞—é—â–∏–µ —Ü–≤–µ—Ç—ã –¥–ª—è —Å–∞–ª–æ–Ω–æ–≤

### 1.3 –ö–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

| –°—Ü–µ–Ω–∞—Ä–∏–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ | –ë—ã—Å—Ç—Ä—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Å–æ—Ä—Ç—É |
| –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è | –û—Ç–±–æ—Ä –ø–æ —Ç–∏–ø—É —Ü–≤–µ—Ç–∫–∞, —Å—Ç—Ä–∞–Ω–µ, —Ü–≤–µ—Ç—É, —Ä–∞–∑–º–µ—Ä—É, —Ü–µ–Ω–µ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ | –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ |
| –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ü–µ–Ω | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–æ–≤–∞—Ä—É, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ |
| –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É | –í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É |

---

## 2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 2.1 –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

| –≠–ª–µ–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------|----------|
| Hero Section | ‚úÖ | –ë–∞–Ω–Ω–µ—Ä —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º |
| –ü–æ–∏—Å–∫ | ‚úÖ | –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ —Å debounce |
| Sidebar Layout | ‚úÖ | 260px sidebar + content grid |
| –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É | ‚úÖ | Checkboxes –≤ sidebar (rosa, carnation, etc.) |
| –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç—Ä–∞–Ω–µ | ‚úÖ | Checkboxes —Å —Ñ–ª–∞–≥–∞–º–∏ (EC, NL, CO, KE, RU) |
| –§–∏–ª—å—Ç—Ä –ø–æ —Ü–≤–µ—Ç—É | ‚úÖ | Color swatches grid |
| –§–∏–ª—å—Ç—Ä –ø–æ –¥–ª–∏–Ω–µ | ‚úÖ | Range inputs (min/max) |
| –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ | ‚úÖ | Range inputs (min/max) |
| –¢–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏ | ‚úÖ | Toggle switch |
| –ì—Ä–∏–¥ –∫–∞—Ä—Ç–æ—á–µ–∫ | ‚úÖ | 3 –∫–æ–ª–æ–Ω–∫–∏ –Ω–∞ desktop (—Å sidebar) |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | ‚úÖ | –ü–æ —Ç–∏–ø—É —Ü–≤–µ—Ç–∫–∞ (flowerImages.ts) |
| –°—Ç—Ä–∞–Ω–∞ | ‚úÖ | –§–ª–∞–≥ + –Ω–∞–∑–≤–∞–Ω–∏–µ (origin_country) |
| –¶–≤–µ—Ç–∞ | ‚úÖ | –ß–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (colors[]) |
| –£–ø–∞–∫–æ–≤–∫–∞ | ‚úÖ | pack_type + pack_qty |
| –¶–µ–Ω–∞ | ‚úÖ | price_min —Å ‚ÇΩ, compact layout |
| –û—Å—Ç–∞—Ç–æ–∫ | ‚úÖ | stock_qty —Å–ø—Ä–∞–≤–∞ –æ—Ç —Ü–µ–Ω—ã |
| –¢–∏—Ä | ‚úÖ | tier_min_qty/tier_max_qty –ø–æ–¥ –æ—Å—Ç–∞—Ç–∫–æ–º |
| –ü–æ—Å—Ç–∞–≤—â–∏–∫ | ‚úÖ | supplier.name |
| –ö–æ—Ä–∑–∏–Ω–∞ | ‚úÖ | –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å |

### 2.2 –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å

#### 2.2.1 –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ ‚Äî –Ω–æ–≤—ã–µ –ø–æ–ª—è

| –ü–æ–ª–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|----------|
| –°—Ç—Ä–∞–Ω–∞ | `attributes.origin_country` | –§–ª–∞–≥ + –∫–æ–¥ (üá™üá® EC, üá≥üá± NL, üá®üá¥ CO) |
| –¶–≤–µ—Ç–∞ | `attributes.colors[]` | –ß–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ |
| –£–ø–∞–∫–æ–≤–∫–∞ | `pack_type` + `pack_qty` | "–ë–∞–∫ 25 —à—Ç" / "–£–ø–∞–∫ 10 —à—Ç" |
| –¢–∏—Ä —Ü–µ–Ω—ã | `tier_min_qty` - `tier_max_qty` | "–æ—Ç 10 —à—Ç" / "10-50 —à—Ç" |

#### 2.2.2 –§–∏–ª—å—Ç—Ä—ã ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

| –§–∏–ª—å—Ç—Ä | –¢–∏–ø | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö |
|--------|-----|-----------------|
| –¢–∏–ø —Ü–≤–µ—Ç–∫–∞ | Checkbox | `normalized_skus.product_type` |
| –°—Ç—Ä–∞–Ω–∞ | Checkbox | `supplier_items.attributes.origin_country` |
| –¶–≤–µ—Ç | Color picker/chips | `supplier_items.attributes.colors` |
| –î–ª–∏–Ω–∞ | Range slider | `offers.length_cm` |
| –¶–µ–Ω–∞ | Range slider | `offers.price_min` |
| –û—Å—Ç–∞—Ç–æ–∫ | Toggle | `offers.stock_qty > 0` |

### 2.3 –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–æ–≤–∞—Ä—É (V2)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ offers –ø–æ `normalized_sku_id` —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º:
- –û–¥–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `—Ç–∏–ø + —Å–æ—Ä—Ç`
- –ü–æ–∫–∞–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Ü–µ–Ω –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤
- –†–∞—Å–∫—Ä—ã—Ç–∏–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

> **MVP:** –ü–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ offers (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
> **V2:** –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ SKU

---

## 3. –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞

### 3.1 –ú–∞–∫–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ (MVP)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ]        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ       (–ø–æ —Ç–∏–ø—É)           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                           ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                 ‚îÇ
‚îÇ  üá™üá® –≠–∫–≤–∞–¥–æ—Ä                    ‚îÇ  ‚Üê –°—Ç—Ä–∞–Ω–∞ —Å —Ñ–ª–∞–≥–æ–º
‚îÇ                                 ‚îÇ
‚îÇ  –†–æ–∑–∞ –ê–≤–∞–ª–∞–Ω—à                   ‚îÇ  ‚Üê –ù–∞–∑–≤–∞–Ω–∏–µ (display_title)
‚îÇ  –±–µ–ª—ã–π, –∫—Ä–µ–º–æ–≤—ã–π                ‚îÇ  ‚Üê –¶–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
‚îÇ                                 ‚îÇ
‚îÇ  60 —Å–º ¬∑ –ë–∞–∫ 25 —à—Ç              ‚îÇ  ‚Üê –î–ª–∏–Ω–∞ ¬∑ –£–ø–∞–∫–æ–≤–∫–∞
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ  85 ‚ÇΩ               –û—Å—Ç: 450   ‚îÇ  ‚Üê –¶–µ–Ω–∞ —Å–ª–µ–≤–∞, –º–µ—Ç—Ä–∏–∫–∏ —Å–ø—Ä–∞–≤–∞
‚îÇ                     –æ—Ç 50 —à—Ç   ‚îÇ  ‚Üê –¢–∏—Ä –ø–æ–¥ –æ—Å—Ç–∞—Ç–∫–æ–º (–∫–æ–º–ø–∞–∫—Ç–Ω–æ)
‚îÇ                                 ‚îÇ
‚îÇ  –§–ª–æ—Ä–∞–û–ø—Ç                       ‚îÇ  ‚Üê –ü–æ—Å—Ç–∞–≤—â–∏–∫ (–º–µ–ª–∫–∏–º)
‚îÇ                                 ‚îÇ
‚îÇ  [ - ] [ 10 ] [ + ]             ‚îÇ  ‚Üê –°—á—ë—Ç—á–∏–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
‚îÇ  [    –í –∫–æ—Ä–∑–∏–Ω—É    ]            ‚îÇ  ‚Üê –ö–Ω–æ–ø–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- –¶–µ–Ω–∞ –≤—Å–µ–≥–¥–∞ —Å–ª–µ–≤–∞, –º–µ—Ç—Ä–∏–∫–∏ (–æ—Å—Ç–∞—Ç–æ–∫, —Ç–∏—Ä) —Å–ø—Ä–∞–≤–∞ ‚Äî –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã
- –¢–∏—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–¥ –æ—Å—Ç–∞—Ç–∫–æ–º, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ
- –í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –≤—ã—Å–æ—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –Ω–∞–ª–∏—á–∏—è —Ç–∏—Ä–∞

### 3.2 –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç—Ä–∞–Ω

```javascript
const COUNTRY_FLAGS = {
  'EC': { flag: 'üá™üá®', name: '–≠–∫–≤–∞–¥–æ—Ä' },
  'NL': { flag: 'üá≥üá±', name: '–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã' },
  'CO': { flag: 'üá®üá¥', name: '–ö–æ–ª—É–º–±–∏—è' },
  'KE': { flag: 'üá∞üá™', name: '–ö–µ–Ω–∏—è' },
  'RU': { flag: 'üá∑üá∫', name: '–†–æ—Å—Å–∏—è' },
  'BY': { flag: 'üáßüáæ', name: '–ë–µ–ª–∞—Ä—É—Å—å' },
};
```

### 3.3 –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø–∞–∫–æ–≤–∫–∏

```typescript
function formatPackInfo(packType: string | null, packQty: number | null): string {
  if (!packType && !packQty) return '';

  const typeMap: Record<string, string> = {
    'bak': '–ë–∞–∫',
    'pack': '–£–ø–∞–∫',
    'bunch': '–ü—É—á–æ–∫',
  };

  const type = typeMap[packType || ''] || packType || '';
  const qty = packQty ? `${packQty} —à—Ç` : '';

  return [type, qty].filter(Boolean).join(' ');
}
```

### 3.4 –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏—Ä–æ–≤

```typescript
function formatTier(tierMin: number | null, tierMax: number | null): string {
  if (!tierMin && !tierMax) return '';
  if (tierMin && !tierMax) return `–æ—Ç ${tierMin} —à—Ç`;
  if (!tierMin && tierMax) return `–¥–æ ${tierMax} —à—Ç`;
  return `${tierMin}‚Äì${tierMax} —à—Ç`;
}
```

---

## 4. API –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 4.1 –¢–µ–∫—É—â–∏–π OfferDetail

```python
class OfferDetail(BaseModel):
    id: UUID
    supplier: SupplierInfo
    sku: SKUInfo
    display_title: str | None
    length_cm: int | None
    pack_type: str | None
    pack_qty: int | None
    price_type: str
    price_min: Decimal
    price_max: Decimal | None
    currency: str
    tier_min_qty: int | None
    tier_max_qty: int | None
    availability: str
    stock_qty: int | None
    published_at: datetime
```

### 4.2 –ù–æ–≤—ã–µ –ø–æ–ª—è (–¥–æ–±–∞–≤–∏—Ç—å)

```python
class OfferDetail(BaseModel):
    # ... existing fields ...

    # NEW: –ê—Ç—Ä–∏–±—É—Ç—ã –∏–∑ supplier_item
    origin_country: str | None = None      # EC, NL, CO
    colors: list[str] = []                  # ["–±–µ–ª—ã–π", "–∫—Ä–µ–º–æ–≤—ã–π"]
```

### 4.3 –ù–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ GET /offers ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|-----|----------|--------|
| `origin_country` | `list[str]` | –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç—Ä–∞–Ω–∞–º (EC, NL, CO) | ‚úÖ |
| `colors` | `list[str]` | –§–∏–ª—å—Ç—Ä –ø–æ —Ü–≤–µ—Ç–∞–º | ‚úÖ |
| `in_stock` | `bool` | –¢–æ–ª—å–∫–æ —Å –æ—Å—Ç–∞—Ç–∫–æ–º > 0 | ‚úÖ |

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- `origin_country` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á–µ—Ä–µ–∑ JSONB `supplier_items.attributes['origin_country']`
- `colors` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á–µ—Ä–µ–∑ JSONB array `supplier_items.attributes['colors']` (ANY match)
- `in_stock` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç `offers.stock_qty > 0`

### 4.4 –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–Ω–æ–≤—ã–π endpoint)

```
GET /offers/facets
```

**Response:**
```json
{
  "product_types": [
    { "value": "rose", "label": "–†–æ–∑–∞", "count": 44 },
    { "value": "carnation", "label": "–ì–≤–æ–∑–¥–∏–∫–∞", "count": 12 }
  ],
  "origin_countries": [
    { "value": "EC", "label": "–≠–∫–≤–∞–¥–æ—Ä", "count": 38 },
    { "value": "NL", "label": "–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã", "count": 15 }
  ],
  "colors": [
    { "value": "–±–µ–ª—ã–π", "count": 22 },
    { "value": "–∫—Ä–∞—Å–Ω—ã–π", "count": 18 }
  ],
  "length_range": { "min": 40, "max": 90 },
  "price_range": { "min": 35, "max": 250 }
}
```

---

## 5. Frontend –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 5.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

```
frontend/src/features/catalog/
‚îú‚îÄ‚îÄ CatalogPage.tsx           # ‚úÖ Sidebar layout + product grid
‚îú‚îÄ‚îÄ catalogApi.ts             # ‚úÖ Filters: origin_country, colors, in_stock
‚îú‚îÄ‚îÄ filtersSlice.ts           # ‚úÖ Extended state + actions
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ FilterSidebar.tsx     # ‚úÖ Sidebar —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

frontend/src/utils/
‚îî‚îÄ‚îÄ catalogFormatters.ts      # ‚úÖ getCountryFlag, formatPackInfo, formatTier, formatColors

frontend/src/types/
‚îî‚îÄ‚îÄ product.ts                # ‚úÖ Extended ProductFilters interface
```

### 5.2 ProductCard Component

```tsx
interface ProductCardProps {
  offer: OfferDetail;
  onAddToCart: (offerId: string, quantity: number) => void;
}

export function ProductCard({ offer, onAddToCart }: ProductCardProps) {
  const [quantity, setQuantity] = useState(1);

  return (
    <Card className="flex flex-col h-full">
      {/* Image */}
      <div className="aspect-square bg-gray-100 rounded-lg mb-4 overflow-hidden flex items-end justify-center">
        <img
          src={getFlowerImage(offer.sku.product_type)}
          alt={offer.display_title || offer.sku.title}
          className="max-w-full max-h-full object-contain"
          loading="lazy"
        />
      </div>

      {/* Country */}
      {offer.origin_country && (
        <CountryFlag code={offer.origin_country} />
      )}

      {/* Title */}
      <h3 className="font-semibold text-gray-900 line-clamp-2">
        {offer.display_title || offer.sku.title}
      </h3>

      {/* Colors */}
      {offer.colors.length > 0 && (
        <p className="text-sm text-gray-600">
          {offer.colors.join(', ')}
        </p>
      )}

      {/* Length & Pack */}
      <p className="text-xs text-gray-500">
        {offer.length_cm && `${offer.length_cm} —Å–º`}
        {offer.length_cm && offer.pack_type && ' ¬∑ '}
        {formatPackInfo(offer.pack_type, offer.pack_qty)}
      </p>

      {/* Price Block */}
      <div className="mt-auto pt-4">
        <div className="flex justify-between items-baseline">
          <span className="text-2xl font-bold text-primary-600">
            {offer.price_min} ‚ÇΩ
          </span>
          <span className="text-xs text-gray-500">
            {offer.stock_qty ? `–û—Å—Ç: ${offer.stock_qty}` : '‚Äî'}
          </span>
        </div>

        {/* Tier */}
        {(offer.tier_min_qty || offer.tier_max_qty) && (
          <TierBadge min={offer.tier_min_qty} max={offer.tier_max_qty} />
        )}

        {/* Supplier */}
        <p className="text-xs text-gray-400 mt-1">
          {offer.supplier.name}
        </p>

        {/* Quantity & Add */}
        <QuantitySelector value={quantity} onChange={setQuantity} />
        <Button onClick={() => onAddToCart(offer.id, quantity)}>
          –í –∫–æ—Ä–∑–∏–Ω—É
        </Button>
      </div>
    </Card>
  );
}
```

### 5.3 FilterPanel Component

```tsx
interface FilterPanelProps {
  facets: FacetsResponse;
  filters: CatalogFilters;
  onFilterChange: (filters: Partial<CatalogFilters>) => void;
}

export function FilterPanel({ facets, filters, onFilterChange }: FilterPanelProps) {
  return (
    <div className="space-y-6">
      {/* Product Type Pills */}
      <FilterSection title="–¢–∏–ø —Ü–≤–µ—Ç–∫–∞">
        <div className="flex flex-wrap gap-2">
          {facets.product_types.map(type => (
            <FilterPill
              key={type.value}
              label={type.label}
              count={type.count}
              active={filters.product_type === type.value}
              onClick={() => onFilterChange({ product_type: type.value })}
            />
          ))}
        </div>
      </FilterSection>

      {/* Country Checkboxes */}
      <FilterSection title="–°—Ç—Ä–∞–Ω–∞">
        {facets.origin_countries.map(country => (
          <FilterCheckbox
            key={country.value}
            label={`${getCountryFlag(country.value)} ${country.label}`}
            count={country.count}
            checked={filters.origin_countries?.includes(country.value)}
            onChange={(checked) => toggleCountry(country.value, checked)}
          />
        ))}
      </FilterSection>

      {/* Color Chips */}
      <FilterSection title="–¶–≤–µ—Ç">
        <div className="flex flex-wrap gap-2">
          {facets.colors.map(color => (
            <FilterChip
              key={color.value}
              label={color.value}
              count={color.count}
              active={filters.colors?.includes(color.value)}
              onClick={() => toggleColor(color.value)}
            />
          ))}
        </div>
      </FilterSection>

      {/* Length Range */}
      <FilterSection title="–î–ª–∏–Ω–∞, —Å–º">
        <RangeSlider
          min={facets.length_range.min}
          max={facets.length_range.max}
          value={[filters.length_min, filters.length_max]}
          onChange={([min, max]) => onFilterChange({ length_min: min, length_max: max })}
        />
      </FilterSection>

      {/* Price Range */}
      <FilterSection title="–¶–µ–Ω–∞, ‚ÇΩ">
        <RangeSlider
          min={facets.price_range.min}
          max={facets.price_range.max}
          value={[filters.price_min, filters.price_max]}
          onChange={([min, max]) => onFilterChange({ price_min: min, price_max: max })}
        />
      </FilterSection>

      {/* In Stock Toggle */}
      <FilterToggle
        label="–¢–æ–ª—å–∫–æ –≤ –Ω–∞–ª–∏—á–∏–∏"
        checked={filters.in_stock}
        onChange={(checked) => onFilterChange({ in_stock: checked })}
      />
    </div>
  );
}
```

---

## 6. –î–∞–Ω–Ω—ã–µ –∏–∑ –ë–î

### 6.1 –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

| –ê—Ç—Ä–∏–±—É—Ç | –¢–∞–±–ª–∏—Ü–∞ | –ü–æ–ª–µ | –ü—Ä–∏–º–µ—Ä |
|---------|---------|------|--------|
| –¢–∏–ø —Ü–≤–µ—Ç–∫–∞ | `normalized_skus` | `product_type` | "rose" |
| –°–æ—Ä—Ç | `normalized_skus` | `variety` | "Avalanche" |
| –°—Ç—Ä–∞–Ω–∞ | `supplier_items` | `attributes->>'origin_country'` | "EC" |
| –¶–≤–µ—Ç–∞ | `supplier_items` | `attributes->'colors'` | ["–±–µ–ª—ã–π"] |
| –î–ª–∏–Ω–∞ | `offers` | `length_cm` | 60 |
| –£–ø–∞–∫–æ–≤–∫–∞ | `offers` | `pack_type`, `pack_qty` | "bak", 25 |
| –¶–µ–Ω–∞ | `offers` | `price_min`, `price_max` | 85.00, null |
| –¢–∏—Ä | `offers` | `tier_min_qty`, `tier_max_qty` | 50, null |
| –û—Å—Ç–∞—Ç–æ–∫ | `offers` | `stock_qty` | 450 |

### 6.2 SQL –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è offers

```sql
-- –°–≤—è–∑—å offer ‚Üí supplier_item –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤
SELECT
    o.*,
    si.attributes->>'origin_country' as origin_country,
    si.attributes->'colors' as colors
FROM offers o
JOIN sku_mappings sm ON sm.normalized_sku_id = o.normalized_sku_id
JOIN supplier_items si ON si.id = sm.supplier_item_id
WHERE o.supplier_id = si.supplier_id
  AND sm.status = 'confirmed';
```

### 6.3 –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ (–∏–∑ –∞–Ω–∞–ª–∏–∑–∞)

| –¢–∏–ø —Ü–≤–µ—Ç–∫–∞ | –ö–æ–ª-–≤–æ | –°—Ç—Ä–∞–Ω—ã | –¶–≤–µ—Ç–∞ |
|-----------|--------|--------|-------|
| –†–æ–∑–∞ | 44 | EC, NL, CO | –±–µ–ª—ã–π, –∫—Ä–∞—Å–Ω—ã–π, —Ä–æ–∑–æ–≤—ã–π, –∂—ë–ª—Ç—ã–π |
| –ì–≤–æ–∑–¥–∏–∫–∞ | 2 | CO, NL | –∫—Ä–∞—Å–Ω—ã–π, –º–∏–∫—Å |
| –ì–∏–ø—Å–æ—Ñ–∏–ª–∞ | 2 | EC | –±–µ–ª—ã–π |
| –†—É—Å–∫—É—Å | 2 | EC | –∑–µ–ª—ë–Ω—ã–π |
| –ê–ª—å—Å—Ç—Ä–æ–º–µ—Ä–∏—è | 1 | CO | –º–∏–∫—Å |
| –ü–∏—Å—Ç–∞—à | 1 | IL | –∑–µ–ª—ë–Ω—ã–π |
| –ü—Ä–æ—Ç–µ—è | 1 | ZA | —Ä–æ–∑–æ–≤—ã–π |
| –≠–≤–∫–∞–ª–∏–ø—Ç | 1 | EC | –∑–µ–ª—ë–Ω—ã–π |

---

## 7. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: HTML –ü—Ä–æ—Ç–æ—Ç–∏–ø ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –°–æ–∑–¥–∞—Ç—å `prototype/catalog_page.html`
- [x] –î–∏–∑–∞–π–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏ (—Å—Ç—Ä–∞–Ω–∞, —Ü–≤–µ—Ç–∞, —É–ø–∞–∫–æ–≤–∫–∞, —Ç–∏—Ä)
- [x] –î–∏–∑–∞–π–Ω –ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (checkboxes –¥–ª—è —Ç–∏–ø–∞ –∏ —Å—Ç—Ä–∞–Ω—ã)
- [x] –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –±–ª–æ–∫ —Ü–µ–Ω—ã (—Ü–µ–Ω–∞ —Å–ª–µ–≤–∞, –æ—Å—Ç–∞—Ç–æ–∫+—Ç–∏—Ä —Å–ø—Ä–∞–≤–∞)
- [x] –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

### –§–∞–∑–∞ 2: Backend API ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –î–æ–±–∞–≤–∏—Ç—å `origin_country`, `colors` –≤ OfferDetail
- [x] –°–≤—è–∑–∞—Ç—å offers —Å supplier_items —á–µ—Ä–µ–∑ sku_mappings
- [x] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≤ GET /offers (origin_country, colors, in_stock)
- [ ] –°–æ–∑–¥–∞—Ç—å endpoint GET /offers/facets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è V2)

### –§–∞–∑–∞ 3: Frontend ‚Äî –ö–∞—Ä—Ç–æ—á–∫–∞ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –û–±–Ω–æ–≤–∏—Ç—å CatalogPage —Å –Ω–æ–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º –∫–∞—Ä—Ç–æ—á–∫–∏
- [x] –î–æ–±–∞–≤–∏—Ç—å —É—Ç–∏–ª–∏—Ç—ã: catalogFormatters.ts (getCountryFlag, formatPackInfo, formatTier, formatColors)
- [x] –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π price-block —Å –≤—ã—Ä–æ–≤–Ω–µ–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏

### –§–∞–∑–∞ 4: Frontend ‚Äî –§–∏–ª—å—Ç—Ä—ã ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –°–æ–∑–¥–∞—Ç—å FilterSidebar –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (sidebar 260px)
- [x] –†–∞—Å—à–∏—Ä–∏—Ç—å filtersSlice (origin_country[], colors[], in_stock, length_min, length_max)
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ CatalogPage (flex layout: sidebar + content)
- [x] –î–æ–±–∞–≤–∏—Ç—å catalogApi —Å –Ω–æ–≤—ã–º–∏ filter parameters

### –§–∞–∑–∞ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] Integration —Ç–µ—Å—Ç—ã –¥–ª—è API
- [ ] E2E —Ç–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

---

## 8. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

1. **–ö–∞—Ä—Ç–æ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞** ‚Äî –≤—Å–µ –ø–æ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–°—Ç—Ä–∞–Ω–∞ –≤–∏–¥–Ω–∞** ‚Äî —Ñ–ª–∞–≥ + –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å origin_country
3. **–¶–≤–µ—Ç–∞ —á–∏—Ç–∞–µ–º—ã** ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
4. **–£–ø–∞–∫–æ–≤–∫–∞ –ø–æ–Ω—è—Ç–Ω–∞** ‚Äî "–ë–∞–∫ 25 —à—Ç" –≤–º–µ—Å—Ç–æ raw –¥–∞–Ω–Ω—ã—Ö
5. **–¢–∏—Ä—ã –æ–±—ä—è—Å–Ω–µ–Ω—ã** ‚Äî "–æ—Ç 50 —à—Ç" —Ä—è–¥–æ–º —Å —Ü–µ–Ω–æ–π
6. **–§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç** ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
7. **–°–±—Ä–æ—Å —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Äî –∫–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å" –æ—á–∏—â–∞–µ—Ç –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã
8. **–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è** ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã

---

## 9. –°—Å—ã–ª–∫–∏

- **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** `frontend/src/features/catalog/CatalogPage.tsx`
- **API offers:** `apps/api/routers/offers.py`
- **–ú–æ–¥–µ–ª–∏:** `apps/api/models/normalized.py`, `apps/api/models/items.py`
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:** `frontend/src/utils/flowerImages.ts`
- **Seller Cabinet (—Ä–µ—Ñ–µ—Ä–µ–Ω—Å):** `docs/tasks/SELLER_CABINET_SPEC.md`
